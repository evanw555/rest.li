<!DOCTYPE html>
<html lang="en">

  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128576866-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-128576866-1');
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <title>PDL Syntax</title>
    <meta name="description" content="Rest.li PDL Syntax." />

    <link rel="icon"
      type="image/png"
      href="/rest.li/images/icon_pegasus.png">
  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/rest.li/assets/materialize.css" />
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/rest.li/assets/main.css">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/rest.li/assets/syntax-highlight-tango.css">
    <link rel="canonical" href="http://localhost:8001/rest.li/pdl_syntax" />
    <link rel="alternate" type="application/rss+xml" title="rest.li" href="/rest.li/feed.xml" />

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

    <script src="//code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="/rest.li/js/lunr.min.js"></script>
    <script src="/rest.li/js/lunr-feed.js"></script>
    

    
    <script>
       $(function() {
          $("h1").addClass("no_toc");
       });
    </script>
</head>


  <body>

    <nav class="dark-grey" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" class="brand-logo" href="/rest.li/">Rest.li</a>
      <ul class="right hide-on-med-and-down">
        
        <li>
          <a href="/rest.li/get_started/quick_start" >
            Getting Started
          </a>
        </li>
        
        <li>
          <a href="/rest.li/user_guide/server_architecture" >
            User Guide
          </a>
        </li>
        
        <li>
          <a href="/rest.li/spec/protocol" >
            API Reference
          </a>
        </li>
        
        <li>
          <a href="/rest.li/contribute/howto" >
            Contribute
          </a>
        </li>
        
          <li>
            <div class="center row" >
              <div class="col s12 ">
                <div class="row">
                  <div class="input-field col s6 s12 min">
                      <i id="search-txt" class="material-icons prefix">search</i>
                      <input type="text" id="search-input">
                    </div>
                  </div>
                </div>
              </div>
          </li>
          <li>
              <a id="github-menu" href="http://github.com/linkedin/rest.li/" >
                   <i class="fa fa-github"></i>
                </a>
          </li>
          </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</nav>



        <div class="container">
        <div class="row">
                <div class="col s12 m4 l3"> 
               
                    
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">User Guide</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/user_guide/server_architecture">Rest.li Architecture</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_server">Rest.li Server</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_client">Rest.li Client Framework</a></li>
                       
                         <li><a href="/rest.li/user_guide/unstructured_data">Unstructured Data</a></li>
                       
                         <li><a href="/rest.li/Components">Components</a></li>
                       
                         <li><a href="/rest.li/Asynchronous-Servers-and-Clients-in-Rest_li">Asynchronous in Rest.li</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data Schemas</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/pdl_syntax">PDL Syntax</a></li>
                       
                         <li><a href="/rest.li/pdsc_syntax">PDSC Syntax</a></li>
                       
                         <li><a href="/rest.li/pdl_migration">Migrating from PDSC to PDL</a></li>
                       
                         <li><a href="/rest.li/avro_translation">Avro Translation</a></li>
                       
                         <li><a href="/rest.li/java_binding">Java Binding</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Modeling Resources</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/modeling/modeling">Modeling Resources</a></li>
                       
                         <li><a href="/rest.li/modeling/compatibility_check">Snapshots and Resource Compatibility Checking</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/how_data_is_serialized_for_transport">How Data is Serialized for Transport</a></li>
                       
                         <li><a href="/rest.li/how_data_is_represented_in_memory">How Data is Represented in Memory</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Main concepts</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Rest_li-Filters">Filters</a></li>
                       
                         <li><a href="/rest.li/Projections">Projections</a></li>
                       
                         <li><a href="/rest.li/Validation-in-Rest_li">Validation</a></li>
                       
                         <li><a href="/rest.li/Attachment-Streaming">Attachment Streaming</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Mutli-language</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/multi_language_compatibility_matrix">Compatibility Matrix</a></li>
                       
                         <li><a href="/rest.li/test_suite">Test Suite</a></li>
                       
                         <li><a href="https://github.com/mchen07/restli-csharp">C#</a></li>
                       
                         <li><a href="/rest.li/Scala-Integration">Scala Integration</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Testing</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Writing-unit-tests-for-Rest_li-clients-and-servers">Writing Unit Tests</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">How to</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Send-Rest_li-Request-Query-In-Request-Body">Send Request Query in the Body</a></li>
                       
                         <li><a href="/rest.li/How-to-use-projections-in-Java">Use Projections</a></li>
                       
                         <li><a href="/rest.li/Rest_li_Avro_conversions">Avro Conversion</a></li>
                       
                         <li><a href="/rest.li/Compression">Compression</a></li>
                       
                         <li><a href="/rest.li/Rest_li-2_x-upgrade-instructions">Migrate to Rest.li 2.x</a></li>
                       
                         <li><a href="/rest.li/testsuite_how_to">Test Suite</a></li>
                       
                         <li><a href="/rest.li/howto_add_new_language">Test Suite - Add New Language</a></li>
                       
                         <li><a href="/rest.li/user_guide/service_errors_java">Configure Service Errors in Java</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">FAQ</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Data-FAQ">Rest.li - FAQ</a></li>
                       
                         <li><a href="/rest.li/testsuite_troubleshooting">Test Suite - Troubleshooting</a></li>
                       
                        </ul>
                     </ul>
                        
                    </div>
                     <div class="markdown-body col s12 m3 l9">
                            <h1 id="pdl-syntax">PDL Syntax</h1>

<h2 id="contents">Contents</h2>
<ul>
  <li><a href="#pdl-schema-definition">PDL Schema Definition</a></li>
  <li><a href="#creating-a-schema">Creating a Schema</a></li>
  <li><a href="#record-type">Record Type</a></li>
  <li><a href="#primitive-type">Primitive Types</a></li>
  <li><a href="#array-type">Array Type</a></li>
  <li><a href="#map-type">Map Type</a></li>
  <li><a href="#union-type">Union Type</a></li>
  <li><a href="#enum-type">Enum Type</a></li>
  <li><a href="#fixed-type">Fixed Type</a></li>
  <li><a href="#typerefs">Typerefs</a></li>
  <li><a href="#namespace">Namespace</a></li>
  <li><a href="#import">Import</a></li>
  <li><a href="#properties">Properties</a></li>
  <li><a href="#deprecation">Deprecation</a></li>
  <li><a href="#package">Package</a></li>
</ul>

<h2 id="pdl-schema-definition">PDL Schema Definition</h2>

<p>PDL is a Pegasus schema definition language, which is developer friendly and more concise than the JSON based schema format.</p>

<h2 id="creating-a-schema">Creating a Schema</h2>

<p>Each schema should be stored in its own file with a <code class="highlighter-rouge">.pdl</code> extension.
The Pegasus code generator implements a resolver that is similar to Java
class loaders. If there is a reference to a named schema, the code
generator will try to look for a file in the code generator’s resolver
path. The resolver path is similar to a Java classpath. The fully
qualified name of the named schema will be translated to a relative file
name. The relative file name is computed by replacing dots (“.”) in the
fully qualified name by the directory path separator (typically “/”) and
appending a <code class="highlighter-rouge">.pdl</code> extension. This relative file name is appended to
each path in the resolver path. The resolver opens each of these files
until it finds a file that contains the named schema.</p>

<p>Pegasus supports different types of schemas: <a href="#record-type">Records</a>, <a href="#primitive-type">Primitive types</a>, <a href="#enum-type">Enums</a>, <a href="#array-type">Arrays</a>, <a href="#map-type">Maps</a>, <a href="#union-type">Unions</a>, <a href="#fixed-type">Fixed</a> and <a href="#typerefs">Typerefs</a>. 
Please check the following documentations for details.</p>

<h2 id="record-type">Record Type</h2>
<p>Records contain any number of fields, which can be primitive types, enums, unions, maps arrays or other records.</p>

<p>A basic record type can contain a few fields.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">import</span> <span class="n">org.example.time.DateTime</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Example</span><span class="p"> {
  </span><span class="nl">field1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">field3</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">
}
</span></code></pre></div></div>
<p>Record fields can be optional.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A foo record
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Foo</span><span class="p"> {
   </span><span class="nl">field1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
   </span><span class="cm">/**
    * field2 is an optional field.
    */</span><span class="p">
   </span><span class="nl">field2</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p>Record fields may have default values. The default value for a field is expressed as a JSON value.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A foo record
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Foo</span><span class="p"> {
   </span><span class="nl">field1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
   </span><span class="nl">field2</span><span class="p">:</span> <span class="kt">string</span><span class="p"> =</span><span class="w"> </span><span class="s2">"message"</span><span class="p">
}
</span></code></pre></div></div>

<p>An optional field may have default value.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithOptionalPrimitiveDefault</span><span class="p"> {
  </span><span class="nl">intWithDefault</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="kt">int</span><span class="p"> =</span><span class="w"> </span><span class="mi">1</span><span class="p">
}
</span></code></pre></div></div>

<h3 id="inline-records">Inline Records</h3>

<p>A record can contain inline records.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithInlineRecord</span><span class="p"> {
  </span><span class="nl">inline</span><span class="p">:</span> <span class="kr">record</span><span class="p"> </span><span class="n">InlineRecord</span><span class="p"> {
    </span><span class="nl">someField</span><span class="p">:</span> <span class="kt">int</span><span class="p">
  }
  </span><span class="nl">inlineOptional</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="kr">record</span><span class="p"> </span><span class="n">InlineOptionalRecord</span><span class="p"> {
    </span><span class="nl">someField</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  }
}
</span></code></pre></div></div>

<p>The default value of inlined records can be expressed using its serialized JSON representation.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithInlineRecord</span><span class="p"> {

    </span><span class="nl">inline</span><span class="p">:</span> <span class="kr">record</span><span class="p"> </span><span class="n">InlineRecord</span><span class="p"> {
      </span><span class="nl">someField</span><span class="p">:</span> <span class="kt">int</span><span class="p">
    } =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"someField"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}

    </span><span class="nl">inlineOptional</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="kr">record</span><span class="p"> </span><span class="n">InlineOptionalRecord</span><span class="p"> {
      </span><span class="nl">someField</span><span class="p">:</span> <span class="kt">string</span><span class="p">
    } =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"someField"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default-value"</span><span class="w"> </span><span class="p">}
}
</span></code></pre></div></div>

<p>Inline records can also be union members.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">UnionWithInlineRecord</span><span class="p"> {
  </span><span class="nl">value</span><span class="p">:</span> <span class="kr">union</span><span class="p">[

    </span><span class="kr">record</span><span class="p"> </span><span class="n">InlineRecord</span><span class="p"> {
      </span><span class="nl">value</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="kt">int</span><span class="p">
    },

    </span><span class="kr">record</span><span class="p"> </span><span class="n">InlineRecord2</span><span class="p"> {}
  ]
}
</span></code></pre></div></div>

<h3 id="doc-strings">Doc Strings</h3>

<p>Types and fields may be documented using “doc strings”.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Doc strings may be added to types. This doc should describe the purposes
 * of the Example type.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Example</span><span class="p"> {
   </span><span class="cm">/**
    * Doc strings may also be added to fields.
    */</span><span class="p">
   </span><span class="nl">field1</span><span class="p">:</span> <span class="kt">string</span><span class="p">

   </span><span class="c1">// Non-doc string comments are treated as whitespace</span><span class="p">

   </span><span class="cm">/** Doc strings can be single line.*/</span><span class="p">
   </span><span class="nl">field2</span><span class="p">:</span> <span class="kt">int</span><span class="p">
}
</span></code></pre></div></div>

<p><strong>Note:</strong>
If you use the Java comment style for doc strings, e.g “// Doc String”, those doc strings will not be stored in the in-memory schema.</p>

<h3 id="including-fields">Including fields</h3>

<p>Records can include fields from one or more other records.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * Bar includes fields of Foo, Bar will have fields b1 from itself and f1 from Foo
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Bar</span><span class="p"> </span><span class="kr">includes</span><span class="p"> </span><span class="n">Foo</span><span class="p"> {
  </span><span class="nl">b1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Foo</span><span class="p"> {
  </span><span class="nl">f1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p>Multiple records can be included at once using an <code class="highlighter-rouge">includes</code> statement:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * Bar includes fields of Foo and Simple, Bar will have fields b1 from itself, f1 from Foo and s1 from Simple
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Bar</span><span class="p"> </span><span class="kr">includes</span><span class="p"> </span><span class="n">Foo</span><span class="p">, </span><span class="n">Simple</span><span class="p"> {
  </span><span class="nl">b1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Simple</span><span class="p"> {
  </span><span class="nl">s1</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p>In pegasus, field inclusion does not imply inheritance, it is merely a convenience to reduce duplication when writing schemas.</p>

<h3 id="escaping">Escaping</h3>
<p>There are some keywords which are reserved in Pegasus. If you have to use them to define any names, you need to put them in backticks: ` `.</p>

<h4 id="keyword-escaping">Keyword Escaping</h4>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">PdlKeywordEscaping</span><span class="p"> {
  </span><span class="nl">`namespace`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">`record`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">`null`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">`enum`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">recordName</span><span class="p">:</span> <span class="kr">record</span><span class="p"> </span><span class="n">`record`</span><span class="p"> { }
}
</span></code></pre></div></div>

<h4 id="namespacepackage-escaping">Namespace/Package escaping</h4>

<p>Reserved keywords also need to be escaped when used in namespace declarations, package declarations, and import statements.</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models.`record`</span><span class="p">
</span><span class="kr">package</span> <span class="n">com.example.models.`typeref`</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.`optional`</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">NamespacePackageEscaping</span><span class="p"> { }
</span></code></pre></div></div>

<h4 id="property-key-escaping">Property key escaping</h4>

<p>If you want Pegasus to treat property key name with dots as one string key, please use backticks to escape such string. Escaping property keys can also be used to escape reserved keywords such as “namespace” or “record”.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">PropertyKeyEscaping</span><span class="p"> {
  </span><span class="nd">@`namespace`</span> <span class="p">=</span><span class="w"> </span><span class="s2">"foo.bar"</span><span class="p">
  </span><span class="nd">@`test.path`</span> <span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">
  </span><span class="nd">@validate.`com.linkedin.CustomValidator`</span> <span class="p">=</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">
  </span><span class="nl">aField</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<h2 id="primitive-types">Primitive Types</h2>

<p>The Pegasus primitive types are: int, long, float, double, boolean, string and bytes.</p>

<p>For Example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitives</span><span class="p"> {
  </span><span class="nl">intField</span><span class="p">:</span> <span class="kt">int</span><span class="p">
  </span><span class="nl">longField</span><span class="p">:</span> <span class="kt">long</span><span class="p">
  </span><span class="nl">floatField</span><span class="p">:</span> <span class="kt">float</span><span class="p">
  </span><span class="nl">doubleField</span><span class="p">:</span> <span class="kt">double</span><span class="p">
  </span><span class="nl">booleanField</span><span class="p">:</span> <span class="kt">boolean</span><span class="p">
  </span><span class="nl">stringField</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">bytesField</span><span class="p">:</span> <span class="kt">bytes</span><span class="p">
}
</span></code></pre></div></div>

<p>Primitive types with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitiveDefaults</span><span class="p"> {
  </span><span class="nl">intWithDefault</span><span class="p">:</span> <span class="kt">int</span><span class="p"> =</span><span class="w"> </span><span class="mi">1</span><span class="p">
  </span><span class="nl">longWithDefault</span><span class="p">:</span> <span class="kt">long</span><span class="p"> =</span><span class="w"> </span><span class="mi">3000000000</span><span class="p">
  </span><span class="nl">floatWithDefault</span><span class="p">:</span> <span class="kt">float</span><span class="p"> =</span><span class="w"> </span><span class="mf">3.3</span><span class="p">
  </span><span class="nl">doubleWithDefault</span><span class="p">:</span> <span class="kt">double</span><span class="p"> =</span><span class="w"> </span><span class="mf">4.4E38</span><span class="p">
  </span><span class="nl">booleanWithDefault</span><span class="p">:</span> <span class="kt">boolean</span><span class="p"> =</span><span class="w"> </span><span class="kc">true</span><span class="p">
  </span><span class="nl">stringWithDefault</span><span class="p">:</span> <span class="kt">string</span><span class="p"> =</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">
  </span><span class="nl">bytesWithDefault</span><span class="p">:</span> <span class="kt">bytes</span><span class="p"> =</span><span class="w"> </span><span class="s2">"</span><span class="se">\u</span><span class="s2">0007"</span><span class="p">
}
</span></code></pre></div></div>

<h2 id="array-type">Array Type</h2>

<p>Pegasus Arrays are defined as a collection of a particular “items” type.</p>

<p>For Example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesArray</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">long</span><span class="p">]
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">float</span><span class="p">]
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">double</span><span class="p">]
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">boolean</span><span class="p">]
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">string</span><span class="p">]
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">bytes</span><span class="p">]
}
</span></code></pre></div></div>

<p>Primitive arrays with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesArrayDefaults</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">int</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">long</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mi">3000000000</span><span class="p">,</span><span class="w"> </span><span class="mi">4000000000</span><span class="p">]
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">float</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mf">3.3</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">]
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">double</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mf">4.4E38</span><span class="p">,</span><span class="w"> </span><span class="mf">3.1E24</span><span class="p">]
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">boolean</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">]
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">string</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="s2">"hello"</span><span class="p">]
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">bytes</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="s2">"</span><span class="se">\u</span><span class="s2">0007"</span><span class="p">]
}
</span></code></pre></div></div>

<p>Record or Enum arrays:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.enums.Fruits</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.records.Empty</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithRecordAndEnumArrays</span><span class="p"> {
  </span><span class="nl">empties</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">Empty</span><span class="p">]
  </span><span class="nl">fruits</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">Fruits</span><span class="p">]
}
</span></code></pre></div></div>

<p>Record or Enum arrays with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.enums.Fruits</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.records.Simple</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithRecordAndEnumDefaults</span><span class="p"> {
  </span><span class="nl">empties</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">Simple</span><span class="p">] =</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"defaults!"</span><span class="w"> </span><span class="p">}]
  </span><span class="nl">fruits</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">Fruits</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="s2">"APPLE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ORANGE"</span><span class="p">]
}
</span></code></pre></div></div>

<p>Types can be declared inline within an array definition:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">InlineWithinArray</span><span class="p"> {
  </span><span class="nl">vegetables</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kr">enum</span><span class="p"> </span><span class="n">Vegetables</span><span class="p"> { </span><span class="n">TOMATO</span><span class="p">, </span><span class="n">CARROT</span><span class="p">, </span><span class="n">CABBAGE</span><span class="p"> }]
}
</span></code></pre></div></div>

<h2 id="map-type">Map Type</h2>

<p>Maps are defined with a key type and a value type. The value type can be any valid PDL type, but currently <code class="highlighter-rouge">string</code> is the only supported key type.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesMap</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">int</span><span class="p">]
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">long</span><span class="p">]
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">float</span><span class="p">]
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">double</span><span class="p">]
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">boolean</span><span class="p">]
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">string</span><span class="p">]
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">bytes</span><span class="p">]
}
</span></code></pre></div></div>

<p>Primitive maps with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesMapDefaults</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">int</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"int1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nl">"int2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"int3"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">long</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"long1"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000000000</span><span class="p">,</span><span class="w"> </span><span class="nl">"long2"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000000000</span><span class="w"> </span><span class="p">}
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">float</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"float1"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.3</span><span class="p">,</span><span class="w"> </span><span class="nl">"float2"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.1</span><span class="w"> </span><span class="p">}
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">double</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="nl">"double1"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.4E38</span><span class="p">,</span><span class="w"> </span><span class="nl">"double2"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.1E24</span><span class="p">}
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">boolean</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"boolean1"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"boolean2"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"boolean3"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">string</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"string1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w"> </span><span class="nl">"string2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world"</span><span class="w"> </span><span class="p">}
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">bytes</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"bytes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\u</span><span class="s2">0007"</span><span class="w"> </span><span class="p">}
}
</span></code></pre></div></div>

<p>Complex types map, demonstrating how types can be declared inline within a map definition:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.enums.Fruits</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.records.Empty</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.records.Simple</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.`fixed`.Fixed8</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithComplexTypesMap</span><span class="p"> {
  </span><span class="nl">empties</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="n">Empty</span><span class="p">]
  </span><span class="nl">fruits</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="n">Fruits</span><span class="p">]
  </span><span class="nl">arrays</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kr">array</span><span class="p">[</span><span class="n">Simple</span><span class="p">]]
  </span><span class="nl">maps</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="n">Simple</span><span class="p">]]
  </span><span class="nl">unions</span><span class="p">:</span> <span class="kr">map</span><span class="p">[
    </span><span class="kt">string</span><span class="p">,
    </span><span class="kr">typeref</span><span class="p"> </span><span class="n">WithComplexTypesMapUnion</span><span class="p"> = </span><span class="kr">union</span><span class="p">[</span><span class="kt">int</span><span class="p">, </span><span class="kt">string</span><span class="p">, </span><span class="n">Simple</span><span class="p">]
  ]
  </span><span class="nl">`fixed`</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="n">Fixed8</span><span class="p">]
}
</span></code></pre></div></div>

<h2 id="union-type">Union Type</h2>

<p>A union type may be defined with any number of member types. Member type can be primitive, record, enum, map or array. Unions are not allowed as members inside an union.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesUnion</span><span class="p"> {
  </span><span class="nl">value</span><span class="p">:</span> <span class="kr">union</span><span class="p">[</span><span class="kt">int</span><span class="p">, </span><span class="kt">long</span><span class="p">, </span><span class="kt">float</span><span class="p">, </span><span class="kt">double</span><span class="p">, </span><span class="kt">boolean</span><span class="p">, </span><span class="kt">string</span><span class="p">, </span><span class="kt">bytes</span><span class="p">]
}
</span></code></pre></div></div>

<p>The member type names also serve as the “member keys” (also called as “union tags”), and identify which union member type data holds.
To define a field of a record containing a union of two other records, we would define:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.records.MultipleChoice</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.records.TextEntry</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Question</span><span class="p"> {
  </span><span class="nl">answerFormat</span><span class="p">:</span> <span class="kr">union</span><span class="p">[</span><span class="n">MultipleChoice</span><span class="p">, </span><span class="n">TextEntry</span><span class="p">]
}
</span></code></pre></div></div>

<p>Union with default value:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.records.MultipleChoice</span><span class="p">
</span><span class="kr">import</span> <span class="n">com.example.models.records.TextEntry</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Question</span><span class="p"> {
  </span><span class="nl">answerFormat</span><span class="p">:</span> <span class="kr">union</span><span class="p">[</span><span class="n">MultipleChoice</span><span class="p">, </span><span class="n">TextEntry</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="nl">"com.linkedin.pegasus.generator.examples.MultipleChoice"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A"</span><span class="p">}}
}
</span></code></pre></div></div>

<p>Types can be declared inline within a union definition:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">InlineWithinUnion</span><span class="p"> {
  </span><span class="nl">produce</span><span class="p">:</span> <span class="kr">union</span><span class="p">[</span><span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> { </span><span class="n">APPLE</span><span class="p">, </span><span class="n">ORANGE</span><span class="p"> }, </span><span class="kr">enum</span><span class="p"> </span><span class="n">Vegetables</span><span class="p"> { </span><span class="n">TOMATO</span><span class="p">, </span><span class="n">CARROT</span><span class="p"> }]
}
</span></code></pre></div></div>

<h3 id="union-with-aliases">Union with aliases</h3>
<p><strong><em>Note:</em></strong> <em>Union with aliases is a recent feature in the pegasus schema language and it might not be fully supported in non-java languages. Please check the <a href="/rest.li/multi_language_compatibility_matrix">support level</a> on all languages you intend to use before using aliases</em></p>

<p>Union members can optionally be given an alias. Aliases can be used to create unions with members of the same type or to give better naming for union members. Union with aliases is useful for cases where a union contains multiple different typerefs with the same underlying type. This use case is not supported with a non-aliased union.</p>

<p>Aliased unions are defined as:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">union</span><span class="p"> [</span><span class="nl">alias</span><span class="p">: </span><span class="n">type</span><span class="p">, </span><span class="cm">/* ... */</span><span class="p">]
</span></code></pre></div></div>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Question</span><span class="p"> {
 </span><span class="nl">answerFormat</span><span class="p">:</span> <span class="kr">union</span><span class="p">[   
   </span><span class="nl">multipleChoice</span><span class="p">: </span><span class="n">MultipleChoice</span><span class="p">,

   </span><span class="cm">/**
    * Doc for shortAnswer.
    */</span><span class="p">
   </span><span class="nl">shortAnswer</span><span class="p">: </span><span class="kt">string</span><span class="p">,

   </span><span class="nd">@customProperty</span> <span class="p">=</span><span class="w"> </span><span class="s2">"property for longAnswer."</span><span class="p">
   </span><span class="nl">longAnswer</span><span class="p">: </span><span class="kt">string</span><span class="p">
 ]
}
</span></code></pre></div></div>

<p><strong>Aliased union members can have doc strings and custom properties. This is not supported for non-aliased union members.</strong></p>

<p>Union with aliases with default value:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.records.MultipleChoice</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">QuestionDefault</span><span class="p"> {
 </span><span class="nl">answerFormat</span><span class="p">:</span> <span class="kr">union</span><span class="p">[ 
   </span><span class="nl">shortAnswer</span><span class="p">: </span><span class="kt">string</span><span class="p">,
   </span><span class="nl">longAnswer</span><span class="p">: </span><span class="kt">string</span><span class="p">,
   </span><span class="nl">multipleChoice</span><span class="p">: </span><span class="n">MultipleChoice</span><span class="p">
 ] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"shortAnswer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"short answer."</span><span class="w"> </span><span class="p">}
}
</span></code></pre></div></div>

<p>In the above example, the union answerFormat has three members, with two string type members differentiated using the aliases (shortAnswer and longAnswer). When aliases are used, the alias becomes the “member key” for the union members and will be used in the wire format.</p>

<p><strong>Note:</strong>
Either ALL union members must be aliased, or NONE at all.</p>

<h2 id="enum-type">Enum Type</h2>

<p>Enums types may contain any number of symbols.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> {
  </span><span class="n">APPLE</span><span class="p">
  </span><span class="n">BANANA</span><span class="p">
  </span><span class="n">ORANGE</span><span class="p">
  </span><span class="n">PINEAPPLE</span><span class="p">
}
</span></code></pre></div></div>

<p>Enums can be referenced by name in other schemas.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">FruitBasket</span><span class="p"> {
  </span><span class="nl">fruit</span><span class="p">:</span> <span class="n">Fruits</span><span class="p">
}
</span></code></pre></div></div>

<p>Enums can also be defined inline.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">FruitBasket</span><span class="p"> {
  </span><span class="nl">fruit</span><span class="p">:</span> <span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> { </span><span class="n">APPLE</span><span class="p">, </span><span class="n">BANANA</span><span class="p">, </span><span class="n">ORANGE</span><span class="p"> }
} 
</span></code></pre></div></div>

<h3 id="enum-documentation-deprecation-and-properties">Enum documentation, deprecation, and properties</h3>

<p>Doc comments, deprecation, and properties can be added directly to individual enum symbols.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A fruit
 */</span><span class="p">
</span><span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> {

  </span><span class="nd">@color</span> <span class="p">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">
  </span><span class="n">APPLE</span><span class="p">

  </span><span class="cm">/**
   * A yummy fruit.
   */</span><span class="p">
  </span><span class="nd">@color</span> <span class="p">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">
  </span><span class="n">BANANA</span><span class="p">

  </span><span class="nd">@deprecated</span><span class="p">
  </span><span class="nd">@color</span> <span class="p">=</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">
  </span><span class="n">ORANGE</span><span class="p">
}
</span></code></pre></div></div>

<h3 id="enum-defaults">Enum defaults</h3>

<p>To specify the default value for an enum field, use a string.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">FruitBasket</span><span class="p"> {
  </span><span class="nl">fruit</span><span class="p">:</span> <span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> { </span><span class="n">APPLE</span><span class="p">, </span><span class="n">BANANA</span><span class="p">, </span><span class="n">ORANGE</span><span class="p"> } =</span><span class="w"> </span><span class="s2">"APPLE"</span><span class="p">
} 
</span></code></pre></div></div>

<p>The default value can also be defined as in the following example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">FruitBasket</span><span class="p"> {
  </span><span class="nl">fruit</span><span class="p">:</span> <span class="n">Fruits</span><span class="p"> =</span><span class="w"> </span><span class="s2">"APPLE"</span><span class="p">
} 
</span></code></pre></div></div>

<h2 id="fixed-type">Fixed Type</h2>

<p>The Fixed type is used to define schemas with a fixed size in terms of number of bytes.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">fixed</span><span class="p"> </span><span class="n">MD5</span><span class="p"> </span><span class="mi">16</span><span class="p">
</span></code></pre></div></div>
<p>In the example above, <code class="highlighter-rouge">16</code> is the defined size for the <code class="highlighter-rouge">MD5</code> schema.</p>

<h2 id="typerefs">Typerefs</h2>

<p>Pegasus supports a new schema type known as a typeref. A typeref is like
a typedef in C. It does not declare a new type but rather declares an alias to
an existing type.</p>

<h3 id="typerefs-can-be-used-to-name-anonymous-types">Typerefs can be used to name anonymous types.</h3>

<p>It is very useful, because unions, maps, and arrays cannot be named directly like records and enums.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">typeref</span><span class="p"> </span><span class="n">AnswerTypes</span><span class="p"> = </span><span class="kr">union</span><span class="p">[</span><span class="n">MultipleChoice</span><span class="p">, </span><span class="n">TextEntry</span><span class="p">]

</span></code></pre></div></div>

<p>Typerefs can be referred to by name from any other type.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Question</span><span class="p"> {
  </span><span class="nl">answerFormat</span><span class="p">:</span> <span class="n">AnswerTypes</span><span class="p">
}
</span></code></pre></div></div>

<h3 id="typerefs-can-provide-additional-clarity-when-using-primitive-types">Typerefs can provide additional clarity when using primitive types.</h3>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">typeref</span><span class="p"> </span><span class="n">UnixTimestamp</span><span class="p"> = </span><span class="kt">long</span><span class="p">
</span></code></pre></div></div>

<h3 id="typerefs-can-be-used-to-specify-custom-types-and-coercers">Typerefs can be used to specify custom types and coercers</h3>

<p>For example, Joda time has a convenient <code class="highlighter-rouge">DateTime</code> Java class. If we wish to use this class in Java to represent date-times, all we need to do is define a pegasus custom type that binds to it:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="nd">@java.class</span> <span class="p">=</span><span class="w"> </span><span class="s2">"org.joda.time.DateTime"</span><span class="p">
</span><span class="nd">@java.coercerClass</span> <span class="p">=</span><span class="w"> </span><span class="s2">"com.linkedin.example.DateTimeCoercer"</span><span class="p">
</span><span class="kr">typeref</span><span class="p"> </span><span class="n">DateTime</span><span class="p"> = </span><span class="kt">string</span><span class="p">
</span></code></pre></div></div>
<p>The coercer is responsible for converting the pegasus “referenced” type, in this case “string” to the Joda <code class="highlighter-rouge">DateTime</code> class:</p>

<p>Once a custom type is defined, it can be used in any type.</p>

<p>For example, to use the <code class="highlighter-rouge">DateTime</code> custom type in a record:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Fortune</span><span class="p"> {
  </span><span class="nl">createdAt</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">
} 
</span></code></pre></div></div>

<h2 id="namespace">Namespace</h2>

<p>Namespace is used to qualify the namespace for the named schema.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Foo</span><span class="p"> {}
</span></code></pre></div></div>

<h2 id="import">Import</h2>

<p>Imports are optional statements which allow you to avoid writing fully-qualified names.
They function similarly to imports in Java.</p>

<p>For example, the following record can be express <em>without</em> imports like this:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">ImportsExample</span><span class="p"> {
  </span><span class="nl">x</span><span class="p">:</span> <span class="n">com.example.models.records.Simple</span><span class="p">,
  </span><span class="nl">y</span><span class="p">:</span> <span class="n">com.example.models.records.Simple</span><span class="p">,
  </span><span class="nl">z</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">com.example.models.records.Simple</span><span class="p">]
}
</span></code></pre></div></div>

<p>Alternatively, the record can be expressed using imports, minimizing the need for repetitive code:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.records.Simple</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">ImportsExample</span><span class="p"> {
  </span><span class="nl">x</span><span class="p">:</span> <span class="n">Simple</span><span class="p">,
  </span><span class="nl">y</span><span class="p">:</span> <span class="n">Simple</span><span class="p">,
  </span><span class="nl">z</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">Simple</span><span class="p">]
}
</span></code></pre></div></div>

<p><strong>Note:</strong></p>
<ul>
  <li>Any type that is not imported and is not within the namespace from which it’s referenced must be referenced by
fully qualified name.</li>
  <li>Using imports in the following ways will lead to PDL parser errors. You should avoid to do so.
    <ol>
      <li>Importing types declared inside the document.</li>
      <li>Importing types within the root namespace of the document.</li>
      <li>Declaring types that conflict with existing imports.</li>
    </ol>
  </li>
</ul>

<h2 id="properties">Properties</h2>
<p>Properties can be used to present arbitrary data and added to records, record fields, enums, enum symbols, aliased union members.</p>

<p>Add properties to record and record field:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="s2">"value"</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> {
  </span><span class="nd">@validate.regex.regex</span> <span class="p">=</span><span class="w"> </span><span class="s2">"^(yes|no)$"</span><span class="p">
  </span><span class="nl">field</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p>Add properties to enum and enum symbols:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="s2">"value"</span><span class="p">
</span><span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> {
  </span><span class="nd">@color</span> <span class="p">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">
  </span><span class="n">APPLE</span><span class="p">

  </span><span class="nd">@color</span> <span class="p">=</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">
  </span><span class="n">ORANGE</span><span class="p">

  </span><span class="nd">@color</span> <span class="p">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">
  </span><span class="n">BANANA</span><span class="p">
}
</span></code></pre></div></div>

<p>Add properties to aliased union members:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">record</span><span class="p"> </span><span class="n">Question</span><span class="p"> {
 </span><span class="nl">answerFormat</span><span class="p">:</span> <span class="kr">union</span><span class="p">[
   </span><span class="nd">@prop</span><span class="p">
   </span><span class="nl">multipleChoice</span><span class="p">: </span><span class="n">MultipleChoice</span><span class="p">,
   </span><span class="nl">shortAnswer</span><span class="p">: </span><span class="kt">string</span><span class="p">,
   </span><span class="nl">longAnswer</span><span class="p">: </span><span class="kt">string</span><span class="p">
 ]
}
</span></code></pre></div></div>

<h3 id="property-values-can-be-any-valid-json-type">Property values can be any valid JSON type:</h3>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">
</span></code></pre></div></div>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="s2">"string"</span><span class="p">
</span></code></pre></div></div>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]
</span></code></pre></div></div>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"a"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nl">"b"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"c"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}}

</span></code></pre></div></div>
<h3 id="property-values-can-also-be-empty">Property values can also be empty:</h3>

<p>If you don’t indicate an explicit property value, it will result in an implicit value of <code class="highlighter-rouge">true</code>.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span><span class="p">
</span></code></pre></div></div>
<h3 id="property-keys-can-be-expressed-as-json">Property keys can be expressed as JSON:</h3>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@a</span> <span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"b"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"c"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"d"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"e"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"f"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}
</span></code></pre></div></div>

<h3 id="property-keys-can-be-expressed-as-paths">Property keys can be expressed as paths:</h3>

<p>The JSON style property key is complicated to write and read, so we provide a shorthand - the dot separate format to express the property keys.</p>

<p>The following example is equivalent to the previous JSON example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@a.b.c.d.e.f</span> <span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">
</span></code></pre></div></div>

<h2 id="deprecation">Deprecation</h2>

<p>All types, enum symbols and record fields can be deprecated by adding <code class="highlighter-rouge">@deprecated</code> annotation.
The property value can be a string describing why the schema element is deprecated or an alternative, or simply boolean <code class="highlighter-rouge">true</code>.</p>

<p>Deprecate record and field:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use record X instead."</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Example</span><span class="p"> {
  </span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use field x instead."</span><span class="p">
  </span><span class="nl">field</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p>Deprecate enum symbols:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">enum</span><span class="p"> </span><span class="n">Fruits</span><span class="p"> {

  </span><span class="n">APPLE</span><span class="p">
  
  </span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use APPLE instead."</span><span class="p">
  </span><span class="n">BANANA</span><span class="p">

  </span><span class="nd">@deprecated</span><span class="p">
  </span><span class="n">ORANGE</span><span class="p">
}
</span></code></pre></div></div>

<h2 id="package">Package</h2>

<p>Package is used to qualify the language binding namespace for the named schema.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.linkedin.pegasus.generator.examples</span><span class="p">
</span><span class="kr">package</span> <span class="n">com.linkedin.pegasus.generator.tests</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Foo</span><span class="p"> {
  </span><span class="nl">intField</span><span class="p">:</span> <span class="kt">int</span><span class="p">
}
</span></code></pre></div></div>
<p>If package is not specified, language binding class for the named schema will use <code class="highlighter-rouge">namespace</code> as its default namespace.</p>

                     </div>
                   </div>
</div>



      <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col s6">
          <h5>Rest.li</h5>
          <p class="text-lighten-4">Rest.li is an open source REST framework for building robust, scalable RESTful architectures using type-safe bindings and asynchronous, non-blocking IO. Rest.li fills a niche for applying RESTful principles at scale with an end-to-end developer workflow for building REST APIs, which promotes clean REST practices, uniform interface design and consistent data modeling.</p>
        </div>
        <div class="col s5 offset-s1">
          <h5 class="black-text">Community</h5>
          <ul>
              <li>GitHub <a class="" href="https://github.com/linkedin/rest.li">Rest.li</a></li>
              <li>LinkedIn <a class="" href="https://www.linkedin.com/groups/4855943/">Rest.li Group</a></li>
            <li>Follow us on twitter: <a class="" href="https://twitter.com/rest_li"> @rest_li</a></li>
            <li>Issue Tracking: <a class="" href="https://github.com/linkedin/rest.li/issues">GitHub issue tracking</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="row">
              <div class="col s6">
                      Copyright 2018 LinkedIn Corporation </br>
                      This work is licensed under a <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.  </br>
                      For clarity, no trademark is licensed.
                      </br></br>
              </div>
              <div class="col s5 offset-s1">
                      This work was made by using Jekyll (and a Jekyll Starter Template)</br>
                      <a target="_blank" href="https://github.com/macrod68/jekyll-materialize-starter-template">https://github.com/macrod68/jekyll-materialize-starter-template</a></br>
                      Copyright © 2017 Marco Damiani. Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a></br>
                      License:<a target="_blank" href="https://opensource.org/licenses/MIT">MIT</a>
              </div>
            </div>
        </div>
    </div>
    <script>
      $(function() {
        return $("h2, h3, h4, h5, h6").each(function(i, el) {
          var $el, icon, id;
          $el = $(el);
          id = $el.attr('id');
          icon = '<i class="fa fa-link"></i>';
          if (id) {
            return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
          }
        });
      });
      </script>
</footer>

      
    <!--  Scripts-->                                                                               
<script src="/rest.li/js/jquery.min.js"></script>
<script src="/rest.li/js/materialize.min.js"></script>
<script src="/rest.li/js/init.js"></script>

  </body>

</html>
